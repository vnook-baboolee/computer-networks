# Часть 3. Технология Ethernet

---

## 1. Назовите преимущества и недостатки разделяемой среды.

**Разделяемая среда** — это среда передачи данных (например, коаксиальный кабель, шина Ethernet), которую одновременно могут
использовать несколько сетевых интерфейсов (устройств) для передачи информации, однако в каждый конкретный момент времени
передавать данные может только один узел.

### Преимущества разделяемой среды
1. **Простота и низкая стоимость**
    - Требуется минимум оборудования: один общий сегмент кабеля (шина или концентратор‑хаб - сетевое устройство для 
   объединения компьютеров в локальную сеть Ethernet с помощью кабелей (чаще — витой пары)).
    - Не нужны сложные коммутаторы или маршрутизаторы.
2. **Лёгкость настройки**
    - Добавление новых узлов не требует сложной конфигурации — достаточно физического подключения к среде.
3. **Наглядность топологии**
    - Физическая структура сети проста для понимания и диагностики (особенно в классических топологиях «шина» или «звезда» с хабом).

### Недостатки разделяемой среды
1. **Коллизии и снижение производительности**
    - Все узлы делят одну среду передачи: при одновременной отправке данных возникает коллизия (конфликт).
    - Протокол CSMA/CD (это механизм «вежливого общения» в старых Ethernet‑сетях: устройства сначала слушают,
   при конфликте останавливаются, ждут и пробуют заново. Сегодня заменён более эффективными технологиями.) вынужден повторно
   передавать кадры, что снижает реальную пропускную способность.
2. **Ограниченная масштабируемость**
    - Чем больше узлов, тем чаще коллизии → скорость падает. Типичные лимиты: до 30–50 узлов в сегменте.
3. **Низкая безопасность**
    - Любой узел может «слушать» трафик всего сегмента (пассивный перехват пакетов).
4. **Единая точка отказа**
    - Повреждение общего кабеля или хаба выводит из строя всю сеть.
5. **Фиксированная скорость**
    - Все устройства работают на одной скорости (например, 10 Мбит/с в классическом Ethernet), что мешает гибкому апгрейду
   отдельных узлов.

Разделяемая среда экономична для малых сетей, но не подходит для высоконагруженных и безопасных сценариев из‑за коллизий,
ограничений масштабирования и рисков перехвата трафика.

---

## 2. Верно ли утверждение: «Маркерный доступ обеспечивает более эффективное использование пропускной способности разделяемой среды»?

Ответ верно

Маркерный доступ (например, в технологии Token Ring) обеспечивает более эффективное использование пропускной способности 
разделяемой среды за счёт:
* **Циклической передачи маркера** — право на передачу данных передаётся от станции к станции по кольцу;
* **Ограничения времени удержания маркера** (тайм-аут) — станция обязана передать маркер дальше, если не использует его;
* **Алгоритма раннего освобождения маркера** (Early Token Release) — станция передаёт маркер следующей станции сразу после
окончания передачи бита кадра, не дожидаясь подтверждения приёма. Это позволяет использовать пропускную способность до 80%
от номинальной;
* **Механизма приоритетов** для разных видов сообщений — повышает эффективность использования среды.

---

## 3. К какому типу относится МАС-адрес 02:25:86:64:са:е4?

MAC-адрес **02:25:86:64:ca:e4** относится к типу **«индивидуальный локальный»** (Unicast), потому что:
1. **Индивидуальный** — это уникальный 48-битный (6-байтный) идентификатор конкретного сетевого устройства (например, сетевой карты),
присвоенный производителем. Первые 3 байта (OUI — Organizationally Unique Identifier, например, **02:25:86**) указывают 
на производителя, а последние 3 байта (**64:ca:e4**) — уникальный номер устройства.
2. **Локальный** — работает только в пределах локальной сети (LAN), используется на канальном уровне модели OSI (уровень 2)
для доставки кадров конкретному устройству. Не маршрутизируется за пределы локальной сети (в отличие от IP-адреса).
3. **Unicast-адрес** — предназначен для адресации одного устройства (в противовес Multicast и Broadcast-адресам, которые
рассчитаны на группы или все устройства сети).

Это уникальный «паспорт» устройства в локальной сети, «прошитый» на заводе и неизменяемый (за редкими исключениями).
Используется для точной доставки данных внутри LAN.

---

## 4. Преамбула в кадре Ethernet нужна для (выберите вариант ответа):</br>а) вхождения приёмника в синхронизм;</br>б) вхождения передатчика в синхронизм;</br>в) расширения кадра для более устойчивого распознавания коллизий.

Ответ а)

**Пояснение:**  
Преамбула в кадре Ethernet — это последовательность из 7 байт (01010101…), за которой следует байт‑разделитель (10101011). 
Её ключевая задача — дать приёмнику время:
- настроиться на тактовую частоту передатчика;
- синхронизировать свои внутренние часы с потоком входящих битов;
- подготовиться к корректному приёму и интерпретации последующих полей кадра (адреса назначения, данных и т.д.).

**Почему не подходят другие варианты:**
- **б)** передатчик изначально контролирует свой сигнал — ему синхронизация с самим собой не требуется;
- **в)** преамбула не влияет на распознавание коллизий: для этого служат иные механизмы (например, CSMA/CD в классических
разделяемых средах Ethernet).

---

## 5. При повышении скорости передачи данных максимальный диаметр сети Ethernet на разделяемой среде (выберите вариант ответа):</br>а) увеличивается;</br>б) уменьшается;</br>в) остаётся неизменным.

Ответ б)

В сетях Ethernet на разделяемой среде действует жёсткое ограничение на максимальный диаметр сети — он напрямую связан с 
механизмом обнаружения коллизий (CSMA/CD). Чтобы коллизия корректно распознавалась всеми узлами, сигнал должен успеть 
пройти до самого дальнего узла и вернуться обратно *до того*, как станция завершит передачу кадра.

При **увеличении скорости передачи** биты следуют друг за другом быстрее. Это означает, что:
- станция успевает передать больше данных за тот же промежуток времени;
- окно обнаружения коллизий сужается: если сигнал не вернётся вовремя, узел не поймёт, что произошла коллизия, — и кадр 
будет потерян.

Чтобы гарантировать своевременное обнаружение коллизий, приходится **сокращать максимальную длину сегментов** (т.е. уменьшать
диаметр сети).

**Пример:**
- для 10 Mbps Ethernet (классический коаксиальный/хабовый Ethernet) допустимый диаметр ~2 500 м (с учётом повторителей);
- для 100 Mbps (Fast Ethernet) — уже ~205 м;
- для 1 Gbps (Gigabit Ethernet) в полудуплексном режиме — порядка 25 м.

Таким образом, рост скорости требует уменьшения физического размера сети для сохранения работоспособности CSMA/CD.

---

## 6. Для повышения производительности сети Ethernet количество её сегментов (при сохранении числа станций в сети) нужно (выберите вариант ответа):</br>а) увеличить;</br>б) уменьшить.

Ответ а)

При делении сети Ethernet на большее число сегментов (провод) (с сохранением общего количества станций) достигается:

- **снижение нагрузки на каждый отдельный сегмент:** число узлов в одном сегменте уменьшается, что сокращает вероятность
коллизий (по механизму CSMA/CD);
- **уменьшение размера домена коллизий:** в каждом сегменте формируется свой домен коллизий — меньше устройств конкурирует
за доступ к среде;
- **сокращение времени ожидания доступа:** станции быстрее получают возможность передавать данные, так как «соперников»
в сегменте стало меньше;
- **рост полезной пропускной способности:** за счёт снижения доли трафика, потерянного из‑за коллизий и повторных передач.

Для объединения сегментов используют устройства канального уровня (коммутаторы, мосты), которые изолируют 
домены коллизий друг от друга. В результате общая производительность сети повышается даже при неизменном числе станций.

---

## 7. Таблица продвижения моста имеет следующий вид:
| МАС-адрес         | Порт    |
|-------------------|---------|
| f8:f2:1e:0c:3a:b8 | 1       |
| d8:94:66:4c:37:bf | 2       |
## На порт 2 коммутатора поступает кадр с адресом назначения ac:1f:6b:64:c7:d6 и адресом источника f8:f2:1e:0c:3a:b8. Укажите, какое действие выполнит мост:</br>а) отбросит кадр;</br>б) передаст его на все порты и заменит первую запись таблицы продвижения на МАС-адрес f8:f2:1e:0c:3a:b8, Порт 2;</br>в) передаст его на все порты и не станет корректировать записи.

Ответ в)

**Обоснование по шагам:**
1. **Анализ адреса назначения (`ac:1f:6b:64:c7:d6`)**
   - Мост сверяет MAC‑адрес назначения с таблицей продвижения.
   - В таблице нет записи для `ac:1f:6b:64:c7:d6`.
   - **Вывод:** мост не знает, к какому порту подключён получатель → выполняет **flooding** (рассылает кадр *на все порты,
   кроме того, откуда он пришёл*).
2. **Анализ адреса источника (`f8:f2:1e:0c:3a:b8`)**
   - В таблице уже есть запись: `f8:f2:1e:0c:3a:b8 → Порт 1`.
   - Поступающий кадр пришёл через **Порт 2**.
   - Однако мост **не заменяет** существующую запись автоматически при таком расхождении. Стандартное поведение:
      - если адрес источника уже есть в таблице, мост *оставляет запись без изменений* (считая её актуальной);
      - обновление происходит лишь при явных признаках перемещения (в ряде реализаций — по истечении таймера старения),
     но не по единичному кадру.
3. **Итог**
   - Кадр отправляется методом flooding (на все порты кроме Порта 2).
   - Записи в таблице остаются прежними.

**Почему не подходят другие варианты:**
- **а)** мост не отбрасывает кадр: отсутствие адреса назначения в таблице — это основание для flooding, а не для удаления.
- **б)** мост не заменяет существующую запись для источника: наличие старой записи (`Порт 1`) блокирует её мгновенное 
обновление на `Порт 2` по умолчанию.

---

## 8. В сети на коммутаторах образовалась петля. Укажите, с помощью каких мер можно предотвратить негативные последствия такой конфигурации:</br>а) установить более скоростные порты Ethernet;</br>б) активировать протокол STP;</br>в) разорвать петлю физическим отсоединением порта;</br>г) разорвать петлю логическим переводом порта в неактивное состояние.

Ответ б), в)

**Суть проблемы**  
При наличии петли в сети Ethernet возникают:
- **широковещательный шторм** (broadcast storm): кадры бесконечно циркулируют по кольцу;
- **дублирование кадров**: один и тот же кадр приходит на разные порты;
- **перегрузка коммутаторов** и полная неработоспособность сети.

**б) активировать протокол STP** — **верно**.  
Протокол Spanning Tree Protocol (STP, IEEE 802.1D) разработан специально для борьбы с петлями. Он:
- автоматически блокирует избыточные связи, оставляя только один активный путь между узлами;
- переводит «лишние» порты в состояние *Blocking* (блокировка);
- при обрыве основного пути автоматически активирует резервный.  
  Это **программное, управляемое** решение — наиболее профессиональный способ.
**в) разорвать петлю физическим отсоединением порта** — **верно**.  
Простое механическое отключение одного из кабелей, образующих кольцо, физически устраняет петлю. Это:
- самый быстрый способ аварийного восстановления работоспособности сети;
- надёжное решение, не требующее настройки оборудования.  
  Минус — нет резервирования; если останется только один путь, его обрыв приведёт к разрыву связи.

### Почему не подходят остальные варианты
**а) установить более скоростные порты Ethernet** — **неверно**.  
Увеличение скорости передачи не устраняет причину проблемы. Петля по‑прежнему будет генерировать бесконечный поток кадров;
просто они будут передаваться быстрее. Сеть всё равно выйдет из строя.
**г) разорвать петлю логическим переводом порта в неактивное состояние** — **частично верно, но избыточно**.  
Технически это работает (порт не пропускает трафик — петля разрывается), но:
- требует ручной настройки на каждом коммутаторе;
- не обеспечивает автоматического восстановления при сбоях;
- по сути, дублирует действие STP, но без его интеллектуальных механизмов.  
  STP (**б**) делает то же самое *автоматически* — поэтому он предпочтительнее.

---

## 9. Чем отличаются коммутаторы Bare Metal от White Box?

**Bare Metal коммутаторы**
- Поставляются **без операционной системы** (нет сетевой ОС).
- Оснащены лишь базовым загрузчиком (например, ONIE — Open Network Install Environment), который позволяет установить ОС вручную.
- Покупатель самостоятельно выбирает и устанавливает сетевую ОС (например, Cumulus Linux, Big Switch Light OS, PicOS или собственную разработку).
- Типичные производители: тайваньские и российские ODM‑поставщики (Accton, Edge‑Core и др.).
- **Ключевая особенность:** полная независимость ПО от «железа» — заказчик сам комбинирует аппаратную платформу и софт.

**White Box коммутаторы**
- Представляют собой **готовый пакет**: аппаратная платформа + предустановленная сетевая ОС.
- ОС может быть от стороннего разработчика (Cumulus Linux, PicOS) либо от самого поставщика (например, Juniper OCX1100 с JUNOS).
- Не требуют ручной установки ОС: устройство готово к настройке сразу после включения.
- Часто дешевле традиционных брендовых решений (на 30–40% по данным Dell’Oro Group).
- **Ключевая особенность:** баланс гибкости и простоты — ОС уже есть, но она не «привязана» к вендору «железа».

### Ключевые отличия (итог)
- **Наличие ОС:** у Bare Metal её нет (только загрузчик), у White Box — уже установлена.
- **Готовность к работе:** Bare Metal требует ручной установки ПО; White Box можно настраивать сразу.
- **Гибкость:** Bare Metal даёт максимальную свободу выбора ОС; White Box предлагает «пакетное» решение.
- **Целевая аудитория:** Bare Metal — для крупных компаний с собственными разработчиками ПО (например, Facebook, Google);
White Box — для ЦОД и организаций, которым нужна экономия без потери функциональности.

---

## 10. Поясните, для чего в стандарте Gigabit Ethernet введено поле расширения:</br>а) для увеличения доли пользовательских данных в кадре;</br>б) для обеспечения диаметра сети 200 м при работе на разделяемой среде.

Ответ б)

Поле расширения (extension field, или *carrier extension*) в Gigabit Ethernet введено **для корректной работы механизма CSMA/CD**
в полудуплексном режиме. Разберу суть вопроса пошагово.

1. **Проблема при росте скорости**  
   В Gigabit Ethernet скорость передачи данных в 10 раз выше, чем в классическом 10 Mbps Ethernet. Это значит, что кадр 
минимальной длины (64 байта) передаётся во много раз быстрее.
2. **Требование CSMA/CD**  
   Чтобы механизм обнаружения коллизий работал, станция должна успеть *заметить* коллизию *до завершения передачи кадра*.
Иначе кадр будет потерян, а коллизия не распознана.
3. **Физический предел — время двойного оборота (PDV)**  
   Сигнал должен успеть дойти до самого дальнего узла и вернуться обратно (время PDV). При увеличении скорости это окно
резко сужается. Без мер компенсации допустимый диаметр сети сократился бы до ~25 м — что неприемлемо.
4. **Решение — поле расширения**
    - Если кадр короче 512 байт, к нему дописывают «пустые» байты (расширение), доводя общую длину до 512 байт.
    - Это искусственно *удлиняет передачу*, давая сигналу время пройти по сети и вернуться при коллизии.
    - Приёмник игнорирует байты расширения — они не попадают в полезную нагрузку.
5. **Результат**  
   Благодаря расширению удаётся сохранить диаметр сети ~200 м в полудуплексных сегментах Gigabit Ethernet — сопоставимо с
Fast Ethernet (100 Mbps).

**Почему не подходит вариант а)**  
Поле расширения *не увеличивает* долю пользовательских данных. Наоборот, оно добавляет служебные байты, которые не несут
полезной информации. Цель — не оптимизация полезной нагрузки, а сохранение работоспособности CSMA/CD на больших расстояниях.

---

## 11. Существует ли вариант стандарта 10G Ethernet на витой паре?

Да, такой стандарт существует.

Это **10GBASE‑T** (стандарт **IEEE 802.3an‑2006**).

**Ключевые параметры:**
- скорость передачи: 10 Гбит/с;
- среда передачи: витая пара категории 6a или 7;
- максимальная длина сегмента:
    - до 55 м — на кабеле Cat6;
    - до 100 м — на кабеле Cat6a или Cat7;
- используется все 4 пары проводов в кабеле;
- применяется сложная модуляция (PAM‑16 с DSQ128) для достижения высокой скорости по медному кабелю.

**Важные нюансы:**
- требует более качественного кабеля и разъёмов, чем 1Gbit/s‑решения;
- энергопотребление выше, чем у оптических вариантов 10G Ethernet;
- широко применяется в локальных сетях (LAN), ЦОД и корпоративных инфраструктурах, где уже проложена витая пара и нет 
необходимости переходить на оптоволокно.

---

## 12. Поясните, за счёт чего повышена скорость в стандарте 100GBase-SR4 по сравнению со стандартом 10GBase-SR (выберите вариант ответа):</br>а) применения метода кодирования 16-QAM;</br>б) повышения тактовой частоты в 4 раза;</br>в) повышения тактовой частоты в 2,5 раза;</br>г) применения четырёх параллельных потоков.

Ответ в), г)

### Как работает 100GBASE‑SR4
Стандарт **100GBASE‑SR4** обеспечивает скорость 100 Гбит/с за счёт комбинации двух решений:
1. **Четыре параллельных потока (ответ г)**
    - Используется **4 отдельных оптических канала** (волокна или пары в многомодовом кабеле).
    - Каждый канал передаёт поток **25 Гбит/с**.
    - На приёмной стороне потоки объединяются: 4 * 25 Гбит/с = 100 Гбит/с.
    - Это ключевой архитектурный сдвиг: вместо одного канала (как в 10GBASE‑SR) — четыре.
2. **Повышение тактовой частоты (ответ в)**
    - В **10GBASE‑SR** один канал работает на скорости **10 Гбит/с**.
    - В **100GBASE‑SR4** каждый из четырёх каналов работает на **25 Гбит/с**.
    - То есть скорость *на канал* выросла в 2.5 раза: 25 / 10 = 2.5.
    - Эта более высокая тактовая частота внутри канала — необходимое техническое условие для достижения 25 Гбит/с на поток.

### Почему остальные варианты не подходят
- **а) метод кодирования 16‑QAM**  
  Не используется в оптических SR‑стандартах. 16‑QAM применяется в *медных* вариантах Ethernet (например, 10GBASE‑T) для
уплотнения данных в полосе частот кабеля. В SR4 используется простая **NRZ‑модуляция** (Non‑Return‑to‑Zero).

- **б) повышение тактовой частоты в 4 раза**  
  Если бы частота выросла в 4 раза, один канал дал бы 40 Гбит/с (10 * 4), а не 25 Гбит/с. Это противоречит спецификации SR4.

---

## 13. Поясните, какие механизмы позволили достичь требуемой скорости в стандарте 400G Ethernet (выберите вариант ответа):</br>а) кодирование PAM4;</br>б) кодирование PAM5;</br>в) применение параллельных волн;</br>г) применение кодов FEC.

Ответ а), в), г)

1. **а) Кодирование PAM4**
    - **Что это.** PAM4 (Pulse Amplitude Modulation, 4‑уровневая) передаёт **2 бита за один символ** (уровни: −3, −1, +1,
   +3) вместо 1 бита у традиционного NRZ.
    - **Эффект.** Удваивает спектральную эффективность: при той же тактовой частоте скорость удваивается.
    - **В 400G.** Ключевой элемент в стандартах типа 400GBASE‑DR4, где сочетается с параллелизмом.
2. **в) Применение параллельных волн (параллельных каналов)**
    - **Суть.** Данные разбиваются на несколько независимых потоков (оптических или электрических), передаваемых одновременно.
    - **Примеры:**
        - 4×100 Гбит/с (например, 400GBASE‑SR8 использует 8 пар волокон);
        - 8×50 Гбит/с и т.п.
    - **Выигрыш.** Суммарная скорость складывается из скоростей всех каналов.
    - **Технологии.** WDM (спектральное уплотнение, объединение нескольких разных световых сигналов в один пучек), многоволоконные
   кабели, многополосные электрические интерфейсы.
3. **г) Применение кодов FEC (Forward Error Correction -  это технология исправления ошибок в процессе передачи данных 
без необходимости повторной отправки пакета)**
    - **Что это.** FEC добавляет избыточные биты для обнаружения и *исправления ошибок* на приёмной стороне без повторной
   передачи.
    - **Зачем в 400G.** При высоких скоростях и использовании PAM4 растёт вероятность ошибок из‑за шума и искажений. FEC 
   компенсирует это, сохраняя приемлемый BER (Bit Error Rate - это показатель качества передачи данных, выраженный долей
   ошибочных битов среди всех переданных.).
    - **Стандарт.** В 400G применяется мощный FEC (например, Reed‑Solomon RS(544,514)), что критично для работы на реальных
   линиях.

### Почему исключён вариант б) кодирование PAM5
- **PAM5 не используется** в стандартах 400G Ethernet.
- **Причины:**
    - PAM5 передаёт 2,32 бита на символ — прирост лишь на ~16% относительно PAM4, но требует значительно более сложной 
  обработки и чувствителен к шуму;
    - IEEE 802.3 выбрал PAM4 как баланс между скоростью, сложностью и надёжностью;
    - в экосистеме 400G нет утверждённых стандартов с PAM5.

---